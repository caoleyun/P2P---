{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\reture\\\\my-app2\\\\src\\\\component\\\\BECanlendar\\\\Canlendar.js\";\nimport React from \"react\";\nimport createDataTable from \"./createDataTable.js\";\nimport YearMonthPicker from \"./YearMonthPicker.js\";\nimport $ from 'jquery/dist/jquery.min.js';\n\nclass Canlendar extends React.Component {\n  constructor({\n    onpick,\n    year,\n    month,\n    day,\n    earliest,\n    latest\n  }) {\n    super(); //得到返回的日历数据数组\n    // //合并\n    // var Allarr=reararr.concat(arr).concat(headarr);\n    // //拆分\n    // var result=[];\n    // for(var i=0;i<Allarr.length;i+=7){\n    // \tresult.push(Allarr.slice(i,i+7));\n    // }\n\n    this.state = {\n      year,\n      month,\n      day,\n      showPicker: false\n    };\n  } //显示日期\n\n\n  showDataTable() {\n    var _createDataTable = createDataTable(this.state.year, this.state.month),\n        reararr = _createDataTable.reararr,\n        arr = _createDataTable.arr,\n        headarr = _createDataTable.headarr;\n\n    var dataArr = reararr.concat(arr, headarr);\n    var trs = [];\n    var tds = []; //类名函数\n\n    let classname = (day, index) => {\n      //这个日的日期\n      var thedate = new Date(this.state.year, this.state.month, day);\n\n      if (this.props.earliest) {\n        //限制的最早的日期\n        var earlistdate = new Date(this.props.earliest.year, this.props.earliest.month, this.props.earliest.day); //比较\n\n        if (thedate - earlistdate < 0) {\n          return \"gray earliestinvaid\";\n        }\n      }\n\n      if (this.props.latest) {\n        //限制的最早晚的日期\n        var latestdate = new Date(this.props.latest.year, this.props.latest.month, this.props.latest.day); //获取 开始日期组件的 日期\n        // var hh=new Date(this.props.kk.kbyear,this.props.kk.kbmonth,this.props.kk.kbday);\n        // console.log(\" 开始日期组件的 日期\",this.props.kk.kbyear,this.props.kk.kbmonth,this.props.kk.kbday);\n        // //比较\n        // ////根据开始日期决定  此组件的 前面的状态\n        // if(thedate-hh<0){\n        // \treturn \"gray latestinvaid\";\n        // }\n\n        if (thedate - latestdate > 0) {\n          return \"gray latestinvaid\";\n        }\n      }\n\n      if (index < reararr.length) {\n        return \"gray prev\";\n      } else if (index >= 42 - headarr.length) {\n        return \"gray next\";\n      } else {\n        if (day === this.state.day) {\n          return \"inmonth cur\";\n        }\n\n        return \"inmonth\";\n      }\n\n      return \"\";\n    };\n\n    dataArr.forEach((day, index) => {\n      if (index % 7 === 0 && index !== 0) {\n        trs.push(React.createElement(\"tr\", {\n          key: index,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 83\n          },\n          __self: this\n        }, tds));\n        tds = [];\n      }\n\n      tds.push(React.createElement(\"td\", {\n        \"data-day\": day,\n        className: classname(day, index),\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 86\n        },\n        __self: this\n      }, day));\n    });\n    trs.push(React.createElement(\"tr\", {\n      key: 5,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }, tds));\n    return React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, trs);\n  } //上一个月\n\n\n  goPrevMonth() {\n    if (this.state.month !== 1) {\n      this.setState({\n        \"month\": this.state.month - 1\n      });\n    } else {\n      this.setState({\n        \"year\": this.state.year - 1,\n        \"month\": 12\n      });\n    } //取消切换年份 cur问题\n\n\n    this.setState({\n      \"day\": 0\n    });\n  } //下一月点击事件\n\n\n  goNextMonth() {\n    if (this.state.month !== 12) {\n      this.setState({\n        \"month\": this.state.month + 1\n      });\n    } else {\n      this.setState({\n        \"year\": this.state.year + 1,\n        \"month\": 1\n      });\n    } //取消切换年份 cur问题\n\n\n    this.setState({\n      \"day\": 0\n    });\n  } //\t显示年月选择框 设置开关\n\n\n  onpick({\n    year,\n    month\n  }) {\n    this.setState({\n      showPicker: false\n    });\n    this.setState({\n      year: year,\n      month: month\n    }); // console.log(year , month);\n  } //显示年月选择框\n\n\n  showpicker() {\n    if (this.state.showPicker) {\n      return React.createElement(YearMonthPicker, {\n        year: this.state.year,\n        month: this.state.month,\n        ref: \"\",\n        onpick: this.onpick.bind(this),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      });\n    } else {\n      return \"\";\n    }\n  } //上树之后\n\n\n  componentDidMount() {\n    //绑定prev事件监听   事件委托\n    var self = this;\n    $(this.refs.table).delegate(\"td.prev\", \"click\", function () {\n      self.goPrevMonth();\n    });\n    $(this.refs.table).delegate(\"td.next\", \"click\", function () {\n      self.goNextMonth();\n    });\n    $(this.refs.table).delegate(\"td.inmonth\", \"click\", function () {\n      self.setState({\n        day: Number($(this).attr(\"data-day\"))\n      }); //给父亲传值\n\n      self.props.onpick(self.state);\n    });\n\n    this.refs.canlendarChooser.onmousewheel = function (event) {\n      //此处有滚轮兼容问题待解决\n      var direction = event.wheelDelta > 0 ? 1 : -1;\n\n      if (direction < 0) {\n        self.goPrevMonth();\n      } else {\n        self.goNextMonth();\n      }\n    };\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"canlendarChooser\",\n      ref: \"canlendarChooser\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      onClick: () => {\n        /*此处事件涉及事件冒泡  会覆盖 e.stopPropagation();*/\n        this.setState({\n          showPicker: true\n        });\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, this.state.year, \"\\u5E74\", this.state.month, \"\\u6708\"), React.createElement(\"a\", {\n      onClick: this.goPrevMonth.bind(this),\n      href: \"javascript:void(0)\",\n      className: \"leftBtn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 167\n      },\n      __self: this\n    }), React.createElement(\"a\", {\n      onClick: this.goNextMonth.bind(this),\n      href: \"javascript:void(0)\",\n      className: \"rightBtn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 168\n      },\n      __self: this\n    }), this.showpicker(), React.createElement(\"table\", {\n      ref: \"table\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, [\"周日\", \"周一\", \"周二\", \"周三\", \"周四\", \"周五\", \"周六\"].map((item, index) => {\n      return React.createElement(\"th\", {\n        key: index,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, item);\n    }))), this.showDataTable()));\n  }\n\n}\n\nexport default Canlendar;","map":{"version":3,"sources":["C:\\Users\\Administrator\\Desktop\\reture\\my-app2\\src\\component\\BECanlendar\\Canlendar.js"],"names":["React","createDataTable","YearMonthPicker","$","Canlendar","Component","constructor","onpick","year","month","day","earliest","latest","state","showPicker","showDataTable","reararr","arr","headarr","dataArr","concat","trs","tds","classname","index","thedate","Date","props","earlistdate","latestdate","length","forEach","push","goPrevMonth","setState","goNextMonth","showpicker","bind","componentDidMount","self","refs","table","delegate","Number","attr","canlendarChooser","onmousewheel","event","direction","wheelDelta","render","map","item"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport createDataTable from \"./createDataTable.js\";\nimport YearMonthPicker from \"./YearMonthPicker.js\";\nimport $ from 'jquery/dist/jquery.min.js';\n\n\n\n\n\n\nclass Canlendar  extends React.Component{\n\tconstructor({onpick,year,month,day,earliest,latest}){\n\t\tsuper();\n\n\t\t//得到返回的日历数据数组\n\t\t// //合并\n\t\t// var Allarr=reararr.concat(arr).concat(headarr);\n\t\t// //拆分\n\t\t// var result=[];\n\t\t// for(var i=0;i<Allarr.length;i+=7){\n\t\t\t\n\t\t// \tresult.push(Allarr.slice(i,i+7));\n\t\t// }\n\n\t\tthis.state={\n\t\t\tyear,\n\t\t\tmonth,\n\t\t\tday,\n\t\t\tshowPicker:false\n\t\t}\n\n\t}\n\t\t\n\t//显示日期\n\tshowDataTable(){\n\t\tvar {reararr,arr,headarr}=createDataTable(this.state.year,this.state.month);\n\t\tvar dataArr=reararr.concat(arr,headarr);\n\t\tvar trs=[];\n\t\tvar tds=[];\n\n\t\t//类名函数\n\t\tlet classname=(day,index)=>{\n\t\t\t//这个日的日期\n\t\t\tvar thedate=new Date(this.state.year,this.state.month,day);\n\t\t\tif(this.props.earliest){\n\t\t\t\t//限制的最早的日期\n\t\t\t\tvar earlistdate=new Date(this.props.earliest.year,this.props.earliest.month,this.props.earliest.day);\n\t\t\t\t//比较\n\t\t\t\tif(thedate-earlistdate<0){\n\t\t\t\t\treturn \"gray earliestinvaid\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(this.props.latest){\n\t\t\t\t//限制的最早晚的日期\n\t\t\t\tvar latestdate=new Date(this.props.latest.year,this.props.latest.month,this.props.latest.day);\n\t\t\t\t//获取 开始日期组件的 日期\n\t\t\t\t// var hh=new Date(this.props.kk.kbyear,this.props.kk.kbmonth,this.props.kk.kbday);\n\t\t\t\t// console.log(\" 开始日期组件的 日期\",this.props.kk.kbyear,this.props.kk.kbmonth,this.props.kk.kbday);\n\t\t\t\t// //比较\n\t\t\t\t// ////根据开始日期决定  此组件的 前面的状态\n\t\t\t\t// if(thedate-hh<0){\n\t\t\t\t// \treturn \"gray latestinvaid\";\n\t\t\t\t// }\n\t\t\t\tif(thedate-latestdate>0){\n\t\t\t\t\treturn \"gray latestinvaid\";\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(index < reararr.length ){\n\t\t\t\treturn \"gray prev\";\n\t\t\t}else if(index >=42-headarr.length){\n\t\t\t\treturn \"gray next\";\n\t\t\t}else{\n\t\t\t\tif (day===this.state.day){\n\t\t\t\t\treturn \"inmonth cur\";\n\t\t\t\t}\n\t\t\t\treturn \"inmonth\";\n\t\t\t}\n\t\t\treturn  \"\";\n\t\t}\n\n\t\tdataArr.forEach((day,index)=>{\n\t\t\tif((index%7) === 0 && index!==0){\n\t\t\t\ttrs.push(<tr key={index}>{tds}</tr>);\n\t\t\t\ttds=[];\n\t\t\t}\n\t\t\ttds.push(<td data-day={day} className={classname(day,index)} key={index}>{day}</td>);\n\t\t});\n\t\ttrs.push(<tr key={5}>{tds}</tr>);\n\t\treturn (\n\t\t\t<tbody>{trs}</tbody>\n\t\t)\n\t}\n\n\t//上一个月\n\tgoPrevMonth(){\n\t\tif(this.state.month!==1){\n\t\t\tthis.setState({\"month\":this.state.month-1});\n\t\t}else{\n\t\t\tthis.setState({\"year\":this.state.year-1,\"month\":12});\n\t\t}\n\t\t//取消切换年份 cur问题\n\t\tthis.setState({\"day\":0});\n\t}\n\n\t//下一月点击事件\n\tgoNextMonth(){\n\t\tif(this.state.month!==12){\n\t\t\tthis.setState({\"month\":this.state.month+1});\n\t\t}else{\n\t\t\tthis.setState({\"year\":this.state.year+1,\"month\":1});\n\t\t}\n\t\t//取消切换年份 cur问题\n\t\tthis.setState({\"day\":0});\n\t}\n\t//\t显示年月选择框 设置开关\n\tonpick({year,month}){\n\t\tthis.setState({showPicker:false});\n\t\tthis.setState({\n\t\t\tyear:year,\n\t\t\tmonth:month\n\t\t});\n\t\t// console.log(year , month);\n\t}\n\t//显示年月选择框\n\tshowpicker(){\n\t\tif(this.state.showPicker){\n\t\t\treturn <YearMonthPicker year={this.state.year} month={this.state.month} ref=\"\" onpick={(this.onpick).bind(this)} ></YearMonthPicker>;\n\t\t}else{\n\t\t\treturn \"\";\n\t\t}\n\t}\n\n\t//上树之后\n\tcomponentDidMount(){\n\t\t//绑定prev事件监听   事件委托\n\t\tvar self = this;\n\t\t$(this.refs.table).delegate(\"td.prev\",\"click\",function(){\n\t\t\tself.goPrevMonth();\n\t\t});\n\t\t$(this.refs.table).delegate(\"td.next\",\"click\",function(){\n\t\t\tself.goNextMonth();\n\t\t});\n\t\t$(this.refs.table).delegate(\"td.inmonth\",\"click\",function(){\n\t\t\tself.setState({day:Number($(this).attr(\"data-day\"))});\n\t\t\t//给父亲传值\n\t\t\tself.props.onpick(self.state);\n\t\t});\n\n\t\t(this.refs.canlendarChooser).onmousewheel=function(event){\n\t\t\t//此处有滚轮兼容问题待解决\n\t\t\tvar direction = event.wheelDelta > 0 ? 1 : -1;\n\t\t\tif(direction<0){\n\t\t\t\tself.goPrevMonth();\n\t\t\t}else{\n\t\t\t\tself.goNextMonth();\n\t\t\t}\n\t\t};\n\t}\n\n\trender(){\n\t\treturn (\n\t\t\t<div className=\"canlendarChooser\" ref=\"canlendarChooser\">\n\t\t\t\t<h4 onClick={()=>{ /*此处事件涉及事件冒泡  会覆盖 e.stopPropagation();*/ this.setState({showPicker:true})}}>\n\t\t\t\t\t{this.state.year}年{this.state.month}月\n\t\t\t\t</h4>\n\n\t\t\t\t<a onClick={(this.goPrevMonth).bind(this)} href=\"javascript:void(0)\" className=\"leftBtn\"></a>\n\t\t\t\t<a onClick={(this.goNextMonth).bind(this)} href=\"javascript:void(0)\" className=\"rightBtn\"></a>\n\n\t\t\t\t{this.showpicker()}\n\n\t\t\t\t<table ref=\"table\">\n\t\t\t\t\t<thead>\n\t\t\t\t\t\t<tr>\n\t\t\t\t\t\t\t{[\"周日\",\"周一\",\"周二\",\"周三\",\"周四\",\"周五\",\"周六\"].map((item,index)=>{\n\t\t\t\t\t\t\t\treturn <th key={index} >{item}</th>\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t</tr>\n\t\t\t\t\t</thead>\n\t\t\t\t\t\t{this.showDataTable()}\n\t\t\t\t</table>\n\t\t\t</div>\n\t\t)\n\t}    \n\t\t\n}\n\nexport default Canlendar;"]},"metadata":{},"sourceType":"module"}