{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Administrator\\\\Desktop\\\\reture\\\\my-app2\\\\src\\\\component\\\\Range\\\\Range.js\";\nimport React from \"react\";\nimport '../../static/Range.less';\nimport $ from 'jquery/dist/jquery.min.js'; // import 'jquery-ui/themes/base/draggable.css'; //此css不引入也不影响draggable 功能\n// import 'jquery-ui/themes/base/resizable.css'; //使用resizable功能必须引入此css！\n// import 'jquery-ui/ui/widgets/draggable.js'; //必须像如下这样直接引入，import 'jquery-ui' 这样引入是无效的\n// import 'jquery-ui/ui/widgets/resizable';\n\nclass Range extends React.Component {\n  constructor({\n    width,\n    min,\n    max,\n    onpick,\n    title\n  }) {\n    super(); //大格的个数  向上取整\n\n    this.biggridamount = Math.ceil(width / 60); //大格的宽度 px\n\n    this.biggridwidth = width / this.biggridamount; //小格的宽度 px\n\n    this.smallgridwidth = this.biggridwidth / 5; //每个大格表示的实际 数量*(大约)\n\n    this.perbiggridnumber = parseInt((max - min) / this.biggridamount); //每小格表示的 实际数量\n\n    this.persmallgridnumber = this.perbiggridnumber / 5; // this.width=width;\n    // console.log(this.width);\n    //表示有寓意的 数字？  边界？\n    // 允许范围的  数字表示\n\n    this.state = {\n      scaleLeft: min,\n      scaleRight: max\n    };\n    this.scaleLeft = this.state.scaleLeft;\n    this.scaleRight = this.state.scaleRight;\n  }\n\n  componentDidMount() {\n    $(this.refs.range).find(\".scaleline i\").css(\"margin-right\", this.smallgridwidth - 1);\n    $(this.refs.range).find(\".scaleline i\").eq(-2).css(\"margin-right\", this.smallgridwidth - 4);\n    $(this.refs.range).find(\".scaleline i\").eq(-1).css(\"margin-right\", 0);\n    $(this.refs.range).find(\".scaleline i:nth-child(5n+1)\").addClass('big');\n    var self = this; //刻度线的数字数组\n\n    $(this.refs.range).find(\".scaleline i.big\").each(function (idx) {\n      $(this).append(\"<u>\" + (self.props.min + self.perbiggridnumber * idx) + \"</u>\");\n    }); //拖拽\n    // $(this.refs.range).find(\".bar b.left\").draggable({\n    // });\n    // 拖拽条 两边界\n\n    var lkk = $(this.refs.range).offset().left + 16; //允许范围的 数字表示的  对应像素\n\n    let scaleLeftpx = $(this.refs.left).offset().left + (this.scaleLeft - this.props.min) / this.persmallgridnumber * this.smallgridwidth;\n    let scaleRightpx = $(this.refs.left).offset().left + (this.scaleRight - this.props.min) / this.persmallgridnumber * this.smallgridwidth - 2; //bar宽度\n    // $(this.refs.bar).width();\n    // 左条限制操作\n\n    $(this.refs.left).on({\n      mousedown: function (e) {\n        var el = $(this);\n        var os = el.offset(),\n            dx = e.pageX - os.left,\n            dy = e.pageY - os.top;\n        $(document).on('mousemove.drag', function (e) {\n          let scaleLeftpx2number = Math.ceil(el.position().left / self.smallgridwidth * self.persmallgridnumber + self.props.min); // console.log(scaleLeftpx2number);\n          //超过边界处理\n          // console.log(\"scaleLeftpx\",scaleLeftpx,\"scaleRightpx\",scaleRightpx,\"e.pageX-dx\",e.pageX-dx,\"perbiggridnumber\",self.perbiggridnumber,\"smallgridwidth\",self.smallgridwidth);\n\n          if (e.pageX - dx < lkk) {\n            el.offset({\n              left: lkk\n            });\n          } else if (e.pageX - dx >= scaleRightpx) {\n            el.offset({\n              left: scaleRightpx\n            });\n          } else {\n            el.offset({\n              left: e.pageX - dx\n            });\n            scaleLeftpx = e.pageX - dx; // console.log(scaleLeftpx);\n\n            self.setState({\n              scaleLeft: scaleLeftpx2number\n            });\n          } //设置蓝色线\n\n\n          $(self.refs.span).css({\n            \"left\": el.position().left,\n            \"width\": $(self.refs.right).position().left - el.position().left\n          });\n        });\n      },\n      mouseup: function (e) {\n        $(document).off('mousemove.drag');\n      }\n    }); // 右条限制操作\n\n    $(this.refs.right).on({\n      mousedown: function (e) {\n        var el = $(this);\n        var os = el.offset(),\n            dx = e.pageX - os.left,\n            dy = e.pageY - os.top;\n        $(document).on('mousemove.drag', function (e) {\n          let scaleLeftpx2number = Math.ceil(el.position().left / self.smallgridwidth * self.persmallgridnumber + self.props.min); //超过边界处理\n\n          if (e.pageX - dx <= scaleLeftpx) {\n            el.offset({\n              left: scaleLeftpx\n            });\n          } else if (e.pageX - dx - lkk - 2 > self.props.width - 2) {\n            el.offset({\n              left: lkk + self.props.width - 2\n            });\n          } else {\n            el.offset({\n              left: e.pageX - dx\n            });\n            scaleRightpx = e.pageX - dx;\n            self.setState({\n              scaleRight: scaleLeftpx2number\n            });\n          } //设置蓝色线\n\n\n          $(self.refs.span).css({\n            \"width\": el.position().left - $(self.refs.left).position().left\n          });\n        });\n      },\n      mouseup: function (e) {\n        $(document).off('mousemove.drag');\n      }\n    }); //点击事件\n\n    $(self.refs.bar).click(function (event) {\n      var el = $(this);\n      var os = el.offset(),\n          dx = event.pageX - os.left,\n          dy = event.pageY - os.top;\n      var x = event.clientX - $(this).offset().left;\n      let scaleLeftpx2number = Math.ceil(x / self.smallgridwidth * self.persmallgridnumber + self.props.min); // console.log(scaleLeftpx2number,self.state.scaleLeft);\n\n      if (scaleLeftpx2number < self.state.scaleLeft) {\n        self.setState({\n          \"scaleLeft\": scaleLeftpx2number\n        });\n        $(self.refs.left).css(\"left\", x);\n        console.log(scaleLeftpx2number, self.state.scaleLeft, event.pageX); //设置蓝色线\n\n        $(self.refs.span).css({\n          \"left\": x,\n          \"width\": $(self.refs.right).position().left - x\n        });\n      } else if (scaleLeftpx2number > self.state.scaleRight) {\n        self.setState({\n          \"scaleRight\": scaleLeftpx2number\n        });\n        $(self.refs.right).css(\"left\", x); //设置蓝色线\n\n        $(self.refs.span).css({\n          \"width\": x - $(self.refs.left).position().left\n        });\n      } else {\n        if (scaleLeftpx2number < (self.state.scaleRight - self.state.scaleLeft) / 2 + self.state.scaleLeft) {\n          self.setState({\n            \"scaleLeft\": scaleLeftpx2number\n          });\n          $(self.refs.left).css(\"left\", x);\n          scaleLeftpx = event.pageX; //设置蓝色线\n\n          $(self.refs.span).css({\n            \"left\": x,\n            \"width\": $(self.refs.right).position().left - x\n          });\n        } else {\n          self.setState({\n            \"scaleRight\": scaleLeftpx2number\n          });\n          $(self.refs.right).css(\"left\", x);\n          scaleRightpx = event.pageX; //设置蓝色线\n\n          $(self.refs.span).css({\n            \"width\": x - $(self.refs.left).position().left\n          });\n        }\n      }\n    });\n  } //显示刻度线\n\n\n  showis() {\n    var is = []; //个数\n\n    var length = this.biggridamount * 5 + 1;\n\n    for (var i = 0; i < length; i++) {\n      is.push(React.createElement(\"i\", {\n        key: i,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }));\n    }\n\n    return is;\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"range\",\n      ref: \"range\",\n      style: {\n        width: this.props.width + 32\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"bar\",\n      ref: \"bar\",\n      style: {\n        width: this.props.width - 1.5\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(\"b\", {\n      className: \"left\",\n      ref: \"left\",\n      style: {\n        left: -0.5\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"u\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, Math.ceil(this.state.scaleLeft))), React.createElement(\"b\", {\n      className: \"right\",\n      ref: \"right\",\n      style: {\n        left: this.props.width - 3.5\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"u\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, Math.ceil(this.state.scaleRight))), React.createElement(\"span\", {\n      ref: \"span\",\n      style: {\n        width: this.props.width - 1.5\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"scaleline\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, this.showis()), React.createElement(\"input\", {\n      type: \"button\",\n      value: \"\\u786E\\u5B9A\",\n      className: \"btn\",\n      onClick: () => {\n        this.props.onpick(this.props.title, this.state);\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 203\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Range;","map":{"version":3,"sources":["C:\\Users\\Administrator\\Desktop\\reture\\my-app2\\src\\component\\Range\\Range.js"],"names":["React","$","Range","Component","constructor","width","min","max","onpick","title","biggridamount","Math","ceil","biggridwidth","smallgridwidth","perbiggridnumber","parseInt","persmallgridnumber","state","scaleLeft","scaleRight","componentDidMount","refs","range","find","css","eq","addClass","self","each","idx","append","props","lkk","offset","left","scaleLeftpx","scaleRightpx","on","mousedown","e","el","os","dx","pageX","dy","pageY","top","document","scaleLeftpx2number","position","setState","span","right","mouseup","off","bar","click","event","x","clientX","console","log","showis","is","length","i","push","render"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAO,yBAAP;AACA,OAAOC,CAAP,MAAc,2BAAd,C,CACA;AACA;AACA;AACA;;AAMA,MAAMC,KAAN,SAAoBF,KAAK,CAACG,SAA1B,CAAmC;AAClCC,EAAAA,WAAW,CAAC;AAACC,IAAAA,KAAD;AAAOC,IAAAA,GAAP;AAAWC,IAAAA,GAAX;AAAeC,IAAAA,MAAf;AAAsBC,IAAAA;AAAtB,GAAD,EAA8B;AACxC,YADwC,CAGxC;;AACA,SAAKC,aAAL,GAAmBC,IAAI,CAACC,IAAL,CAAUP,KAAK,GAAC,EAAhB,CAAnB,CAJwC,CAKxC;;AACA,SAAKQ,YAAL,GAAkBR,KAAK,GAAC,KAAKK,aAA7B,CANwC,CAOxC;;AACA,SAAKI,cAAL,GAAoB,KAAKD,YAAL,GAAkB,CAAtC,CARwC,CAUxC;;AACA,SAAKE,gBAAL,GAAsBC,QAAQ,CAAC,CAACT,GAAG,GAACD,GAAL,IAAU,KAAKI,aAAhB,CAA9B,CAXwC,CAYxC;;AACA,SAAKO,kBAAL,GAAwB,KAAKF,gBAAL,GAAsB,CAA9C,CAbwC,CAexC;AAEA;AAEA;AACA;;AACA,SAAKG,KAAL,GAAW;AACVC,MAAAA,SAAS,EAACb,GADA;AAEVc,MAAAA,UAAU,EAACb;AAFD,KAAX;AAIC,SAAKY,SAAL,GAAe,KAAKD,KAAL,CAAWC,SAA1B;AACA,SAAKC,UAAL,GAAgB,KAAKF,KAAL,CAAWE,UAA3B;AACD;;AAEDC,EAAAA,iBAAiB,GAAE;AAClBpB,IAAAA,CAAC,CAAC,KAAKqB,IAAL,CAAUC,KAAX,CAAD,CAAmBC,IAAnB,CAAwB,cAAxB,EAAwCC,GAAxC,CAA4C,cAA5C,EAA2D,KAAKX,cAAL,GAAoB,CAA/E;AACAb,IAAAA,CAAC,CAAC,KAAKqB,IAAL,CAAUC,KAAX,CAAD,CAAmBC,IAAnB,CAAwB,cAAxB,EAAwCE,EAAxC,CAA2C,CAAC,CAA5C,EAA+CD,GAA/C,CAAmD,cAAnD,EAAkE,KAAKX,cAAL,GAAoB,CAAtF;AACAb,IAAAA,CAAC,CAAC,KAAKqB,IAAL,CAAUC,KAAX,CAAD,CAAmBC,IAAnB,CAAwB,cAAxB,EAAwCE,EAAxC,CAA2C,CAAC,CAA5C,EAA+CD,GAA/C,CAAmD,cAAnD,EAAkE,CAAlE;AACAxB,IAAAA,CAAC,CAAC,KAAKqB,IAAL,CAAUC,KAAX,CAAD,CAAmBC,IAAnB,CAAwB,8BAAxB,EAAwDG,QAAxD,CAAiE,KAAjE;AAEA,QAAIC,IAAI,GAAC,IAAT,CANkB,CAOlB;;AACA3B,IAAAA,CAAC,CAAC,KAAKqB,IAAL,CAAUC,KAAX,CAAD,CAAmBC,IAAnB,CAAwB,kBAAxB,EAA4CK,IAA5C,CAAiD,UAASC,GAAT,EAAa;AAC7D7B,MAAAA,CAAC,CAAC,IAAD,CAAD,CAAQ8B,MAAR,CAAe,SAAOH,IAAI,CAACI,KAAL,CAAW1B,GAAX,GAAesB,IAAI,CAACb,gBAAL,GAAsBe,GAA5C,IAAiD,MAAhE;AACA,KAFD,EARkB,CAYlB;AACA;AAEA;AAEA;;AACA,QAAIG,GAAG,GAAChC,CAAC,CAAC,KAAKqB,IAAL,CAAUC,KAAX,CAAD,CAAmBW,MAAnB,GAA4BC,IAA5B,GAAiC,EAAzC,CAlBkB,CAmBlB;;AACA,QAAIC,WAAW,GAACnC,CAAC,CAAC,KAAKqB,IAAL,CAAUa,IAAX,CAAD,CAAkBD,MAAlB,GAA2BC,IAA3B,GAAgC,CAAC,KAAKhB,SAAL,GAAe,KAAKa,KAAL,CAAW1B,GAA3B,IAAgC,KAAKW,kBAArC,GAAwD,KAAKH,cAA7G;AACA,QAAIuB,YAAY,GAACpC,CAAC,CAAC,KAAKqB,IAAL,CAAUa,IAAX,CAAD,CAAkBD,MAAlB,GAA2BC,IAA3B,GAAgC,CAAC,KAAKf,UAAL,GAAgB,KAAKY,KAAL,CAAW1B,GAA5B,IAAiC,KAAKW,kBAAtC,GAAyD,KAAKH,cAA9F,GAA6G,CAA9H,CArBkB,CAwBlB;AACA;AACA;;AACAb,IAAAA,CAAC,CAAC,KAAKqB,IAAL,CAAUa,IAAX,CAAD,CAAkBG,EAAlB,CAAqB;AACjBC,MAAAA,SAAS,EAAE,UAASC,CAAT,EAAW;AACV,YAAIC,EAAE,GAACxC,CAAC,CAAC,IAAD,CAAR;AACA,YAAIyC,EAAE,GAAGD,EAAE,CAACP,MAAH,EAAT;AAAA,YAAsBS,EAAE,GAAGH,CAAC,CAACI,KAAF,GAAQF,EAAE,CAACP,IAAtC;AAAA,YAA4CU,EAAE,GAAGL,CAAC,CAACM,KAAF,GAAQJ,EAAE,CAACK,GAA5D;AACA9C,QAAAA,CAAC,CAAC+C,QAAD,CAAD,CAAYV,EAAZ,CAAe,gBAAf,EAAiC,UAASE,CAAT,EAAW;AACxD,cAAIS,kBAAkB,GAACtC,IAAI,CAACC,IAAL,CAAW6B,EAAE,CAACS,QAAH,GAAcf,IAAf,GAAqBP,IAAI,CAACd,cAA1B,GAAyCc,IAAI,CAACX,kBAA9C,GAAiEW,IAAI,CAACI,KAAL,CAAW1B,GAAtF,CAAvB,CADwD,CAG3C;AACA;AACA;;AACA,cAAGkC,CAAC,CAACI,KAAF,GAAQD,EAAR,GAAWV,GAAd,EAAkB;AACjBQ,YAAAA,EAAE,CAACP,MAAH,CAAU;AAACC,cAAAA,IAAI,EAAEF;AAAP,aAAV;AACA,WAFD,MAEM,IAAGO,CAAC,CAACI,KAAF,GAAQD,EAAR,IAAYN,YAAf,EAA4B;AACjCI,YAAAA,EAAE,CAACP,MAAH,CAAU;AAACC,cAAAA,IAAI,EAACE;AAAN,aAAV;AACA,WAFK,MAED;AACJI,YAAAA,EAAE,CAACP,MAAH,CAAU;AAACC,cAAAA,IAAI,EAAEK,CAAC,CAACI,KAAF,GAAQD;AAAf,aAAV;AACAP,YAAAA,WAAW,GAACI,CAAC,CAACI,KAAF,GAAQD,EAApB,CAFI,CAGJ;;AACAf,YAAAA,IAAI,CAACuB,QAAL,CAAc;AAAChC,cAAAA,SAAS,EAAC8B;AAAX,aAAd;AACA,WAf0C,CAgB3C;;;AACAhD,UAAAA,CAAC,CAAC2B,IAAI,CAACN,IAAL,CAAU8B,IAAX,CAAD,CAAkB3B,GAAlB,CAAsB;AACrB,oBAAOgB,EAAE,CAACS,QAAH,GAAcf,IADA;AAErB,qBAAQlC,CAAC,CAAC2B,IAAI,CAACN,IAAL,CAAU+B,KAAX,CAAD,CAAmBH,QAAnB,GAA8Bf,IAA9B,GAAmCM,EAAE,CAACS,QAAH,GAAcf;AAFpC,WAAtB;AAIA,SArBD;AAsBH,OA1BQ;AA2BlBmB,MAAAA,OAAO,EAAE,UAASd,CAAT,EAAW;AAAEvC,QAAAA,CAAC,CAAC+C,QAAD,CAAD,CAAYO,GAAZ,CAAgB,gBAAhB;AAAoC;AA3BxC,KAArB,EA3BkB,CAyDlB;;AACAtD,IAAAA,CAAC,CAAC,KAAKqB,IAAL,CAAU+B,KAAX,CAAD,CAAmBf,EAAnB,CAAsB;AAClBC,MAAAA,SAAS,EAAE,UAASC,CAAT,EAAW;AACV,YAAIC,EAAE,GAACxC,CAAC,CAAC,IAAD,CAAR;AACA,YAAIyC,EAAE,GAAGD,EAAE,CAACP,MAAH,EAAT;AAAA,YAAsBS,EAAE,GAAGH,CAAC,CAACI,KAAF,GAAQF,EAAE,CAACP,IAAtC;AAAA,YAA4CU,EAAE,GAAGL,CAAC,CAACM,KAAF,GAAQJ,EAAE,CAACK,GAA5D;AACA9C,QAAAA,CAAC,CAAC+C,QAAD,CAAD,CAAYV,EAAZ,CAAe,gBAAf,EAAiC,UAASE,CAAT,EAAW;AACvD,cAAIS,kBAAkB,GAACtC,IAAI,CAACC,IAAL,CAAW6B,EAAE,CAACS,QAAH,GAAcf,IAAf,GAAqBP,IAAI,CAACd,cAA1B,GAAyCc,IAAI,CAACX,kBAA9C,GAAiEW,IAAI,CAACI,KAAL,CAAW1B,GAAtF,CAAvB,CADuD,CAE3C;;AACA,cAAGkC,CAAC,CAACI,KAAF,GAAQD,EAAR,IAAYP,WAAf,EAA2B;AAC1BK,YAAAA,EAAE,CAACP,MAAH,CAAU;AAACC,cAAAA,IAAI,EAAEC;AAAP,aAAV;AACA,WAFD,MAEM,IAAGI,CAAC,CAACI,KAAF,GAAQD,EAAR,GAAWV,GAAX,GAAe,CAAf,GAAiBL,IAAI,CAACI,KAAL,CAAW3B,KAAX,GAAiB,CAArC,EAAuC;AAC5CoC,YAAAA,EAAE,CAACP,MAAH,CAAU;AAACC,cAAAA,IAAI,EAAEF,GAAG,GAACL,IAAI,CAACI,KAAL,CAAW3B,KAAf,GAAqB;AAA5B,aAAV;AACA,WAFK,MAED;AACJoC,YAAAA,EAAE,CAACP,MAAH,CAAU;AAACC,cAAAA,IAAI,EAAEK,CAAC,CAACI,KAAF,GAAQD;AAAf,aAAV;AACAN,YAAAA,YAAY,GAACG,CAAC,CAACI,KAAF,GAAQD,EAArB;AACAf,YAAAA,IAAI,CAACuB,QAAL,CAAc;AAAC/B,cAAAA,UAAU,EAAC6B;AAAZ,aAAd;AACA,WAX0C,CAY3C;;;AACAhD,UAAAA,CAAC,CAAC2B,IAAI,CAACN,IAAL,CAAU8B,IAAX,CAAD,CAAkB3B,GAAlB,CAAsB;AACrB,qBAAQgB,EAAE,CAACS,QAAH,GAAcf,IAAd,GAAmBlC,CAAC,CAAC2B,IAAI,CAACN,IAAL,CAAUa,IAAX,CAAD,CAAkBe,QAAlB,GAA6Bf;AADnC,WAAtB;AAGA,SAhBD;AAiBH,OArBS;AAsBnBmB,MAAAA,OAAO,EAAE,UAASd,CAAT,EAAW;AAAEvC,QAAAA,CAAC,CAAC+C,QAAD,CAAD,CAAYO,GAAZ,CAAgB,gBAAhB;AAAoC;AAtBvC,KAAtB,EA1DkB,CAmFlB;;AACAtD,IAAAA,CAAC,CAAC2B,IAAI,CAACN,IAAL,CAAUkC,GAAX,CAAD,CAAiBC,KAAjB,CAAuB,UAASC,KAAT,EAAe;AACrC,UAAIjB,EAAE,GAACxC,CAAC,CAAC,IAAD,CAAR;AACA,UAAIyC,EAAE,GAAGD,EAAE,CAACP,MAAH,EAAT;AAAA,UAAuBS,EAAE,GAAGe,KAAK,CAACd,KAAN,GAAYF,EAAE,CAACP,IAA3C;AAAA,UAAiDU,EAAE,GAAGa,KAAK,CAACZ,KAAN,GAAYJ,EAAE,CAACK,GAArE;AAEA,UAAIY,CAAC,GAACD,KAAK,CAACE,OAAN,GAAc3D,CAAC,CAAC,IAAD,CAAD,CAAQiC,MAAR,GAAiBC,IAArC;AACA,UAAIc,kBAAkB,GAACtC,IAAI,CAACC,IAAL,CAAW+C,CAAD,GAAI/B,IAAI,CAACd,cAAT,GAAwBc,IAAI,CAACX,kBAA7B,GAAgDW,IAAI,CAACI,KAAL,CAAW1B,GAArE,CAAvB,CALqC,CAMrC;;AACA,UAAG2C,kBAAkB,GAACrB,IAAI,CAACV,KAAL,CAAWC,SAAjC,EAA2C;AAC1CS,QAAAA,IAAI,CAACuB,QAAL,CAAc;AAAC,uBAAYF;AAAb,SAAd;AACAhD,QAAAA,CAAC,CAAC2B,IAAI,CAACN,IAAL,CAAUa,IAAX,CAAD,CAAkBV,GAAlB,CAAsB,MAAtB,EAA6BkC,CAA7B;AAEDE,QAAAA,OAAO,CAACC,GAAR,CAAYb,kBAAZ,EAA+BrB,IAAI,CAACV,KAAL,CAAWC,SAA1C,EAAoDuC,KAAK,CAACd,KAA1D,EAJ2C,CAM1C;;AACM3C,QAAAA,CAAC,CAAC2B,IAAI,CAACN,IAAL,CAAU8B,IAAX,CAAD,CAAkB3B,GAAlB,CAAsB;AAClB,kBAAOkC,CADW;AAEvB,mBAAQ1D,CAAC,CAAC2B,IAAI,CAACN,IAAL,CAAU+B,KAAX,CAAD,CAAmBH,QAAnB,GAA8Bf,IAA9B,GAAmCwB;AAFpB,SAAtB;AAIN,OAXD,MAWM,IAAGV,kBAAkB,GAACrB,IAAI,CAACV,KAAL,CAAWE,UAAjC,EAA4C;AACjDQ,QAAAA,IAAI,CAACuB,QAAL,CAAc;AAAC,wBAAaF;AAAd,SAAd;AACAhD,QAAAA,CAAC,CAAC2B,IAAI,CAACN,IAAL,CAAU+B,KAAX,CAAD,CAAmB5B,GAAnB,CAAuB,MAAvB,EAA8BkC,CAA9B,EAFiD,CAIjD;;AACM1D,QAAAA,CAAC,CAAC2B,IAAI,CAACN,IAAL,CAAU8B,IAAX,CAAD,CAAkB3B,GAAlB,CAAsB;AACvB,mBAAQkC,CAAC,GAAC1D,CAAC,CAAC2B,IAAI,CAACN,IAAL,CAAUa,IAAX,CAAD,CAAkBe,QAAlB,GAA6Bf;AADhB,SAAtB;AAGN,OARK,MAQD;AAEJ,YAAGc,kBAAkB,GAAC,CAACrB,IAAI,CAACV,KAAL,CAAWE,UAAX,GAAsBQ,IAAI,CAACV,KAAL,CAAWC,SAAlC,IAA6C,CAA7C,GAA+CS,IAAI,CAACV,KAAL,CAAWC,SAAhF,EAA0F;AACzFS,UAAAA,IAAI,CAACuB,QAAL,CAAc;AAAC,yBAAYF;AAAb,WAAd;AACAhD,UAAAA,CAAC,CAAC2B,IAAI,CAACN,IAAL,CAAUa,IAAX,CAAD,CAAkBV,GAAlB,CAAsB,MAAtB,EAA6BkC,CAA7B;AAAgCvB,UAAAA,WAAW,GAACsB,KAAK,CAACd,KAAlB,CAFyD,CAGzF;;AACM3C,UAAAA,CAAC,CAAC2B,IAAI,CAACN,IAAL,CAAU8B,IAAX,CAAD,CAAkB3B,GAAlB,CAAsB;AAClB,oBAAOkC,CADW;AAEvB,qBAAQ1D,CAAC,CAAC2B,IAAI,CAACN,IAAL,CAAU+B,KAAX,CAAD,CAAmBH,QAAnB,GAA8Bf,IAA9B,GAAmCwB;AAFpB,WAAtB;AAIN,SARD,MAQK;AACJ/B,UAAAA,IAAI,CAACuB,QAAL,CAAc;AAAC,0BAAaF;AAAd,WAAd;AACAhD,UAAAA,CAAC,CAAC2B,IAAI,CAACN,IAAL,CAAU+B,KAAX,CAAD,CAAmB5B,GAAnB,CAAuB,MAAvB,EAA8BkC,CAA9B;AAAiCtB,UAAAA,YAAY,GAACqB,KAAK,CAACd,KAAnB,CAF7B,CAGJ;;AACM3C,UAAAA,CAAC,CAAC2B,IAAI,CAACN,IAAL,CAAU8B,IAAX,CAAD,CAAkB3B,GAAlB,CAAsB;AACvB,qBAAQkC,CAAC,GAAC1D,CAAC,CAAC2B,IAAI,CAACN,IAAL,CAAUa,IAAX,CAAD,CAAkBe,QAAlB,GAA6Bf;AADhB,WAAtB;AAGN;AACD;AAED,KA9CD;AAgDA,GAlKiC,CAoKlC;;;AACA4B,EAAAA,MAAM,GAAE;AACP,QAAIC,EAAE,GAAC,EAAP,CADO,CAEP;;AACA,QAAIC,MAAM,GAAC,KAAKvD,aAAL,GAAmB,CAAnB,GAAqB,CAAhC;;AACA,SAAI,IAAIwD,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACD,MAAd,EAAqBC,CAAC,EAAtB,EAAyB;AACxBF,MAAAA,EAAE,CAACG,IAAH,CAAQ;AAAG,QAAA,GAAG,EAAED,CAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAAR;AACA;;AACD,WAAOF,EAAP;AACA;;AAEDI,EAAAA,MAAM,GAAE;AACP,WACC;AAAK,MAAA,SAAS,EAAC,OAAf;AAAuB,MAAA,GAAG,EAAC,OAA3B;AAAmC,MAAA,KAAK,EAAE;AAAC/D,QAAAA,KAAK,EAAC,KAAK2B,KAAL,CAAW3B,KAAX,GAAiB;AAAxB,OAA1C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAK,MAAA,SAAS,EAAC,KAAf;AAAqB,MAAA,GAAG,EAAC,KAAzB;AAA+B,MAAA,KAAK,EAAE;AAACA,QAAAA,KAAK,EAAC,KAAK2B,KAAL,CAAW3B,KAAX,GAAiB;AAAxB,OAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAG,MAAA,SAAS,EAAC,MAAb;AAAoB,MAAA,GAAG,EAAC,MAAxB;AAA+B,MAAA,KAAK,EAAE;AAAC8B,QAAAA,IAAI,EAAC,CAAC;AAAP,OAAtC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAIxB,IAAI,CAACC,IAAL,CAAU,KAAKM,KAAL,CAAWC,SAArB,CAAJ,CADD,CADD,EAIC;AAAG,MAAA,SAAS,EAAC,OAAb;AAAqB,MAAA,GAAG,EAAC,OAAzB;AAAiC,MAAA,KAAK,EAAE;AAACgB,QAAAA,IAAI,EAAC,KAAKH,KAAL,CAAW3B,KAAX,GAAiB;AAAvB,OAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OAAIM,IAAI,CAACC,IAAL,CAAU,KAAKM,KAAL,CAAWE,UAArB,CAAJ,CADD,CAJD,EAOC;AAAM,MAAA,GAAG,EAAC,MAAV;AAAiB,MAAA,KAAK,EAAE;AAACf,QAAAA,KAAK,EAAC,KAAK2B,KAAL,CAAW3B,KAAX,GAAiB;AAAxB,OAAxB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAPD,CADD,EAUC;AAAK,MAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACE,KAAK0D,MAAL,EADF,CAVD,EAaC;AAAO,MAAA,IAAI,EAAC,QAAZ;AAAqB,MAAA,KAAK,EAAC,cAA3B;AAAgC,MAAA,SAAS,EAAC,KAA1C;AAAgD,MAAA,OAAO,EAAE,MAAI;AAAC,aAAK/B,KAAL,CAAWxB,MAAX,CAAkB,KAAKwB,KAAL,CAAWvB,KAA7B,EAAmC,KAAKS,KAAxC;AAA+C,OAA7G;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAbD,CADD;AAiBA;;AAjMiC;;AAsMnC,eAAehB,KAAf","sourcesContent":["import React from \"react\";\nimport '../../static/Range.less';\nimport $ from 'jquery/dist/jquery.min.js';\n// import 'jquery-ui/themes/base/draggable.css'; //此css不引入也不影响draggable 功能\n// import 'jquery-ui/themes/base/resizable.css'; //使用resizable功能必须引入此css！\n// import 'jquery-ui/ui/widgets/draggable.js'; //必须像如下这样直接引入，import 'jquery-ui' 这样引入是无效的\n// import 'jquery-ui/ui/widgets/resizable';\n\n\n\n\n\nclass Range extends React.Component{\n\tconstructor({width,min,max,onpick,title}){\n\t\tsuper();\n\n\t\t//大格的个数  向上取整\n\t\tthis.biggridamount=Math.ceil(width/60);\n\t\t//大格的宽度 px\n\t\tthis.biggridwidth=width/this.biggridamount;\n\t\t//小格的宽度 px\n\t\tthis.smallgridwidth=this.biggridwidth/5;\n\n\t\t//每个大格表示的实际 数量*(大约)\n\t\tthis.perbiggridnumber=parseInt((max-min)/this.biggridamount);\n\t\t//每小格表示的 实际数量\n\t\tthis.persmallgridnumber=this.perbiggridnumber/5;\n\n\t\t// this.width=width;\n\n\t\t// console.log(this.width);\n\t\t\n\t\t//表示有寓意的 数字？  边界？\n\t\t// 允许范围的  数字表示\n\t\tthis.state={\n\t\t\tscaleLeft:min,\n\t\t\tscaleRight:max\n\t\t}\n\t\t\tthis.scaleLeft=this.state.scaleLeft;\n\t\t\tthis.scaleRight=this.state.scaleRight;\n\t}\n\n\tcomponentDidMount(){\n\t\t$(this.refs.range).find(\".scaleline i\").css(\"margin-right\",this.smallgridwidth-1);\n\t\t$(this.refs.range).find(\".scaleline i\").eq(-2).css(\"margin-right\",this.smallgridwidth-4);\n\t\t$(this.refs.range).find(\".scaleline i\").eq(-1).css(\"margin-right\",0);\n\t\t$(this.refs.range).find(\".scaleline i:nth-child(5n+1)\").addClass('big');\n\n\t\tvar self=this;\n\t\t//刻度线的数字数组\n\t\t$(this.refs.range).find(\".scaleline i.big\").each(function(idx){\n\t\t\t$(this).append(\"<u>\"+(self.props.min+self.perbiggridnumber*idx)+\"</u>\");\n\t\t});\n\n\t\t//拖拽\n\t\t// $(this.refs.range).find(\".bar b.left\").draggable({\n\n\t\t// });\n\t\t\n\t\t// 拖拽条 两边界\n\t\tvar lkk=$(this.refs.range).offset().left+16;\n\t\t//允许范围的 数字表示的  对应像素\n\t\tlet scaleLeftpx=$(this.refs.left).offset().left+(this.scaleLeft-this.props.min)/this.persmallgridnumber*this.smallgridwidth;\n\t\tlet scaleRightpx=$(this.refs.left).offset().left+(this.scaleRight-this.props.min)/this.persmallgridnumber*this.smallgridwidth-2;\n\n\n\t\t//bar宽度\n\t\t// $(this.refs.bar).width();\n\t\t// 左条限制操作\n\t\t$(this.refs.left).on({\n\t\t    mousedown: function(e){\n\t\t                var el=$(this);\n\t\t                var os = el.offset(), dx = e.pageX-os.left, dy = e.pageY-os.top;\n\t\t                $(document).on('mousemove.drag', function(e){\n\t\t\t\t\t\tlet scaleLeftpx2number=Math.ceil((el.position().left)/self.smallgridwidth*self.persmallgridnumber+self.props.min);\n\n\t\t                \t// console.log(scaleLeftpx2number);\n\t\t                \t//超过边界处理\n\t\t                \t// console.log(\"scaleLeftpx\",scaleLeftpx,\"scaleRightpx\",scaleRightpx,\"e.pageX-dx\",e.pageX-dx,\"perbiggridnumber\",self.perbiggridnumber,\"smallgridwidth\",self.smallgridwidth);\n\t\t                \tif(e.pageX-dx<lkk){\n\t\t                \t\tel.offset({left: lkk});\n\t\t                \t}else if(e.pageX-dx>=scaleRightpx){\n\t\t                \t\tel.offset({left:scaleRightpx});\n\t\t                \t}else{\n\t\t                \t\tel.offset({left: e.pageX-dx});\n\t\t                \t\tscaleLeftpx=e.pageX-dx;\n\t\t                \t\t// console.log(scaleLeftpx);\n\t\t                \t\tself.setState({scaleLeft:scaleLeftpx2number});\n\t\t                \t}\n\t\t                \t//设置蓝色线\n\t\t                \t$(self.refs.span).css({\n\t\t                \t\t\"left\":el.position().left,\n\t\t                \t\t\"width\":$(self.refs.right).position().left-el.position().left\n\t\t                \t});\n\t\t                });\n\t\t            },\n\t\t   mouseup: function(e){ $(document).off('mousemove.drag'); }\n\t\t});\n\n\t\t// 右条限制操作\n\t\t$(this.refs.right).on({\n\t\t    mousedown: function(e){\n\t\t                var el=$(this);\n\t\t                var os = el.offset(), dx = e.pageX-os.left, dy = e.pageY-os.top;\n\t\t                $(document).on('mousemove.drag', function(e){ \n\t\t\t\t\t\t\tlet scaleLeftpx2number=Math.ceil((el.position().left)/self.smallgridwidth*self.persmallgridnumber+self.props.min);\n\t\t                \t//超过边界处理\n\t\t                \tif(e.pageX-dx<=scaleLeftpx){\n\t\t                \t\tel.offset({left: scaleLeftpx});\n\t\t                \t}else if(e.pageX-dx-lkk-2>self.props.width-2){\n\t\t                \t\tel.offset({left: lkk+self.props.width-2});\n\t\t                \t}else{\n\t\t                \t\tel.offset({left: e.pageX-dx});\n\t\t                \t\tscaleRightpx=e.pageX-dx;\n\t\t                \t\tself.setState({scaleRight:scaleLeftpx2number});\n\t\t                \t} \n\t\t                \t//设置蓝色线\n\t\t                \t$(self.refs.span).css({\n\t\t                \t\t\"width\":el.position().left-$(self.refs.left).position().left\n\t\t                \t});\n\t\t                });\n\t\t            },\n\t\t   mouseup: function(e){ $(document).off('mousemove.drag'); }\n\t\t});\n\n\t\t//点击事件\n\t\t$(self.refs.bar).click(function(event){\n\t\t\tvar el=$(this);\n\t\t\tvar os = el.offset() , dx = event.pageX-os.left, dy = event.pageY-os.top;\n\n\t\t\tvar x=event.clientX-$(this).offset().left;\n\t\t\tlet scaleLeftpx2number=Math.ceil((x)/self.smallgridwidth*self.persmallgridnumber+self.props.min);\n\t\t\t// console.log(scaleLeftpx2number,self.state.scaleLeft);\n\t\t\tif(scaleLeftpx2number<self.state.scaleLeft){\n\t\t\t\tself.setState({\"scaleLeft\":scaleLeftpx2number});\n\t\t\t\t$(self.refs.left).css(\"left\",x);\n\t\t\t\t\n\t\t\tconsole.log(scaleLeftpx2number,self.state.scaleLeft,event.pageX);\n\n\t\t\t\t//设置蓝色线\n\t\t        $(self.refs.span).css({\n\t\t            \"left\":x,\n\t\t     \t\t\"width\":$(self.refs.right).position().left-x\n\t        \t});\n\t\t\t}else if(scaleLeftpx2number>self.state.scaleRight){\n\t\t\t\tself.setState({\"scaleRight\":scaleLeftpx2number});\n\t\t\t\t$(self.refs.right).css(\"left\",x);\n\t\t\t\t\n\t\t\t\t//设置蓝色线\n\t\t        $(self.refs.span).css({\n\t\t     \t\t\"width\":x-$(self.refs.left).position().left\n\t        \t});\n\t\t\t}else{\n\t\t\t\t\n\t\t\t\tif(scaleLeftpx2number<(self.state.scaleRight-self.state.scaleLeft)/2+self.state.scaleLeft){\n\t\t\t\t\tself.setState({\"scaleLeft\":scaleLeftpx2number});\n\t\t\t\t\t$(self.refs.left).css(\"left\",x);scaleLeftpx=event.pageX;\n\t\t\t\t\t//设置蓝色线\n\t\t\t        $(self.refs.span).css({\n\t\t\t            \"left\":x,\n\t\t\t     \t\t\"width\":$(self.refs.right).position().left-x\n\t\t        \t});\n\t\t\t\t}else{\n\t\t\t\t\tself.setState({\"scaleRight\":scaleLeftpx2number});\n\t\t\t\t\t$(self.refs.right).css(\"left\",x);scaleRightpx=event.pageX;\n\t\t\t\t\t//设置蓝色线\n\t\t\t        $(self.refs.span).css({\n\t\t\t     \t\t\"width\":x-$(self.refs.left).position().left\n\t\t        \t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t});\n\n\t}\n\n\t//显示刻度线\n\tshowis(){\n\t\tvar is=[];\n\t\t//个数\n\t\tvar length=this.biggridamount*5+1;\n\t\tfor(var i=0;i<length;i++){\n\t\t\tis.push(<i key={i}></i>);\n\t\t}\n\t\treturn is;\n\t}\n\n\trender(){\n\t\treturn(\n\t\t\t<div className=\"range\" ref=\"range\" style={{width:this.props.width+32}}>\n\t\t\t\t<div className=\"bar\" ref=\"bar\" style={{width:this.props.width-1.5}}>\n\t\t\t\t\t<b className=\"left\" ref=\"left\" style={{left:-0.5}}>\n\t\t\t\t\t\t<u>{Math.ceil(this.state.scaleLeft)}</u>\n\t\t\t\t\t</b>\n\t\t\t\t\t<b className=\"right\" ref=\"right\" style={{left:this.props.width-3.5}}>\n\t\t\t\t\t\t<u>{Math.ceil(this.state.scaleRight)}</u>\n\t\t\t\t\t</b>\n\t\t\t\t\t<span ref=\"span\" style={{width:this.props.width-1.5}}></span>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"scaleline\">\n\t\t\t\t\t{this.showis()}\n\t\t\t\t</div>\n\t\t\t\t<input type=\"button\" value=\"确定\" className=\"btn\" onClick={()=>{this.props.onpick(this.props.title,this.state)}} />\n\t\t\t</div>\n\t\t)\n\t}\n\n}\n\n\nexport default Range;"]},"metadata":{},"sourceType":"module"}